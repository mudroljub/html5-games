<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Proba</title>
	<script src="js/alatke.js"></script>
</head>
<body>

<script>

var slike = {
    pozadina: 'slike/skupstina2.png',
    likovi: {      // nazivi bitni, od njih pravi objekte!
        vulin: 'slike/vulin.png',
        toma: 'slike/toma.png',
        dacic: 'slike/dacic.png'
    },
    predmeti: {
        paradajz: "slike/politicar.png",
        jaje: "slike/politicar.png",
        krpa: "slike/politicar.png"
    }
}


// provrteti kroz glavne kljuceve
// potom kroz sve podobjekte po njihovim kljucevima
// pozadinu ucitati zasebno, ostalo u petlji

var ucitajSlike = function(slike, povratnaRadnja){     // nakon učitavanja pušta uvod
    var glavni_kljucevi = Object.keys(slike);
	var broj_glavnih_kljuceva = Object.keys(slike).length;
    var ucitaneSlike = 0;


	for(var i=1; i < broj_glavnih_kljuceva; i++) {      // preskace pozadinu
		
		kazi(glavni_kljucevi[i])
		
	}

    var kljucevi_likova = Object.keys(slike.likovi);
	kazi(kljucevi_likova[0])
	kazi(slike.likovi[kljucevi_likova[0]])
	
    for (var kljuc in slike.likovi) {
        var ova_slika = new Image();
        ova_slika.onload = function kadSveUcita() {
            ucitaneSlike++;
            if (ucitaneSlike >= broj_glavnih_kljuceva) {
                povratnaRadnja();
            }
        };  // kraj kadSveUcita()
        ova_slika.src = slike.likovi[kljuc];
    }	// kraj for

}	// kraj ucitajSlike



ucitajSlike(slike, function(){kazi("Sve učitano.")});

</script>

</body>
</html>
